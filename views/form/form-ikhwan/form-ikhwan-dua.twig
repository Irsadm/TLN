{% extends 'templates/form-template.twig' %}

{% block main %}
    

    <div class="container-fluid" style="width:100%; height:100%">
      <div class="row satu">
         <div class="col-xs-6 col-sm-4"></div>
        <div class="col-xs-6 col-sm-4 text-left">

          <form id="myForm" >
          <center>
            <div class="error-block hidden">
          <span class="breadcrumb" id="errormessages" style="display: inline; background-color: #f2dede; color: #cc4644; width: 54%; box-shadow: 4px 4px 3px  #C0C0C0; margin-bottom: 13%">Lengkapi data profil Anda !</span>
          </div>
          </center>
                    <!-- form -->
            <!-- jumlah hafalan -->
            <br>
            <div class="form-group jumlah-hafalan" style="">
                <label for="status" class="label-radio">Jumlah hafalan Qur'an</label>
                <span  class="errorRadio hidden" id="jmlHafalanQuran" ><img class="float-right" style="display: inline; width: 5.7%; margin-top: 0 !important" src="public/assets/images/icon_tanda_seru.png" alt=""></span>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="jmlHafalanQuran" id="jmlHafalanQuran" value="Surat pendek">
                    <label class="form-check-label" for="jmlHafalanQuran">
                      Surat pendek
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="jmlHafalanQuran" id="jmlHafalanQuran" value="1 - 3 juz">
                    <label class="form-check-label" for="jmlHafalanQuran">
                      1 - 3 juz
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="jmlHafalanQuran" id="jmlHafalanQuran" value="3 - 10 juz">
                    <label class="form-check-label" for="jmlHafalanQuran">
                      3 - 10 juz
                    </label>
                  </div> 
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="jmlHafalanQuran" id="jmlHafalanQuran" value="Diatas 10 juz">
                    <label class="form-check-label" for="jmlHafalanQuran">
                      Diatas 10 juz
                    </label>
                  </div>               
            </div>

            <div>
              <textarea name="kelompokNgaji" id="kelompokNgaji" class="form-control" cols="1" rows="1" placeholder="Kelompok ngaji"></textarea>
              <small class="lineheigh"><span>Sebutkan nama Ustadz, website, fikrah, manhaj, organisasi  atau radio yang sedang didengar 
                  dan diikuti</span></small>
            </div> 

              <br>
              <!-- celana di atas mata kaki -->

              <div class="form-group jumlah-hafalan">
                <label for="status" class="label-radio">Celana di atas mata kaki</label>
                <span  class="errorRadio2 hidden" id="celanaDiatasMataKaki"><img class="float-right" style="display: inline;width: 5.7%; margin-top: 0 !important" src="public/assets/images/icon_tanda_seru.png" alt=""></span>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="celanaDiatasMataKaki" id="celanaDiatasMataKaki" value="Selalu" >
                    <label class="form-check-label" for="celanaDiatasMataKaki">
                      Selalu
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="celanaDiatasMataKaki" id="celanaDiatasMataKaki" value="Saat shalat">
                    <label class="form-check-label" for="celanaDiatasMataKaki">
                      Saat shalat
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="celanaDiatasMataKaki" id="celanaDiatasMataKaki" value="Tidak">
                    <label class="form-check-label" for="celanaDiatasMataKaki">
                      Tidak
                    </label>
                  </div> 
            </div>
            <br>

            <!-- merokok -->

              <div class="form-group jumlah-hafalan">
                <label for="status" class="label-radio">Merokok</label>
                <span  class="errorRadio3 hidden" id="merokok"><img class="float-right" style="display: inline; width: 5.5%" src="public/assets/images/icon_tanda_seru.png" alt=""></span>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="merokok" id="merokok" value="Ya" >
                    <label class="form-check-label" for="exampleRadios1">
                      Ya
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="merokok" id="merokok" value="tidak">
                    <label class="form-check-label" for="exampleRadios2">
                      Tidak
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="merokok" id="merokok" value="Proses berhenti">
                    <label class="form-check-label" for="exampleRadios3">
                      Proses berhenti
                    </label>
                  </div> 
            </div>

            <br>
            <!-- hoby -->
             <div class="form-group" style="margin: auto%">
              <textarea name="hobi" id="hobi" class="form-control" cols="1" rows="1" placeholder="Hobi"></textarea>
            </div> 
            <br>
            <br>
            <!-- tinggi badan -->
                <div class="form-group">
                  <input type="number" class="form-control" id="tinggiBadan" name="tinggiBadan" aria-describedby="basic-addon3" placeholder="Tinggi Badan">
                </div>
            <br>
            <br>
            <!-- berat badan -->
                <div class="form-group">
                  <input type="number" class="form-control" id="beratBadan" name="beratBadan" aria-describedby="basic-addon3" placeholder="Berat Badan">
                </div>


          <!-- <div class="float-right"> -->
              <button type="submit" class="float-right btn btn-lanjut" id="selanjutnya"> Selanjutnya </button>
              <input type="hidden" id="url" value="{{ base_url() }}">
          <!-- </div> -->
          </form>

        <!-- endform -->

        </div>
        <!-- Optional: clear the XS cols if their content doesn't match in height -->

        <div class="clearfix visible-xs-block"></div>
        <div class="col-xs-6 col-sm-4"></div>
      </div>




    </div>
{% endblock %}

{% block js %}

 <script>
 var base_url = $('#url').val();
jQuery.validator.setDefaults({
  debug: true,
});

 $(document).ready(function() {
$("input[name='jmlHafalanQuran']").click(function(event) {
$('.errorRadio').hide();
  /* Act on the event */
});
$("input[name='celanaDiatasMataKaki']").click(function(event) {
$('.errorRadio2').hide();
  /* Act on the event */
});
$("input[name='merokok']").click(function(event) {
$('.errorRadio3').hide();
  /* Act on the event */
});

  var validator = $("#myForm").validate({
        errorClass: "errors",
        // errorElement: "input",
        // onfocusout: false,
        rules: {
            jmlHafalanQuran: {
                "required": true,
                // "email" : true,
            },
            kelompokNgaji: {
                "required": true
            },
            celanaDiatasMataKaki: {
                "required": true
            },
            merokok: {
                "required": true
            },
            hobi: {
                "required": true
            },
            tinggiBadan: {
                "required": true
            },
            beratBadan: {
                "required": true
            },
            
        },
      errorPlacement: function(error, element) {
        if (element.attr("name") == "jmlHafalanQuran") {
          $('.errorRadio').removeClass('hidden');
        } else if (element.attr("name") == "celanaDiatasMataKaki")  {
          $('.errorRadio2').removeClass('hidden');

        } else if (element.attr("name") == "merokok")  {
          $('.errorRadio3').removeClass('hidden');

        } else {
           error.appendTo(element);
         }

       },
        // errorPlacement: function(element) {
        //     if ($(element).hasClass('form-control')) {
        //         this.element(element);
        //     }
        // },
        showErrors: function (errorMap, errorList) {

        this.defaultShowErrors(); 

        // toggle the error summary box
        if (this.numberOfInvalids() > 0) {
            $(".error-block").removeClass('hidden');
        } else {
            $("#errormessages").hide();
        }


    },
     submitHandler: function(form) {
            var currentKey = localStorage.getItem('key');

            var jmlHafalanQuran = document.querySelector('input[name="jmlHafalanQuran"]:checked').value;
            var kelompokNgaji = document.getElementById('kelompokNgaji').value;
            var celanaDiatasMataKaki = document.querySelector('input[name="celanaDiatasMataKaki"]:checked').value;
            var merokok = document.querySelector('input[name="merokok"]:checked').value;
            var hobi = document.getElementById('hobi').value;
            var tinggiBadan = document.getElementById('tinggiBadan').value;
            var beratBadan = document.getElementById('beratBadan').value;

            var ikhwanTable = database.ref().child('ikhwan/'+currentKey);

            // var newIkhwan = ikhwanTable.push();
            // var newKey = ikhwanTable.push().key;

            ikhwanTable.update({
              jmlHafalanQuran: jmlHafalanQuran,
              kelompokNgaji: kelompokNgaji,
              celanaDiatasMataKaki: celanaDiatasMataKaki,
              merokok: merokok,
              hobi: hobi,
              tinggiBadan: tinggiBadan,
              beratBadan: beratBadan,
            });

            window.location.replace(base_url+'/form-tiga');
        }

    });

});

    $('#selanjutnya').click(function () {
        $('#myForm').valid(); // run a validity test on the form
    });



</script>

    
{% endblock %}
